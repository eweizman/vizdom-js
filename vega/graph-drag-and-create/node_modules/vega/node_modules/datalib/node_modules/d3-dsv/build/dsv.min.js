!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(r.dsv={})}(this,function(r){"use strict";var n=function(r){function n(r,n){var t;return e(r,function(r,e){if(t)return t(r,e-1);var o=new Function("d","return {"+r.map(function(r,n){return JSON.stringify(r)+": d["+n+"]"}).join(",")+"}");t=n?function(r,e){return n(o(r),e)}:o})}function e(r,n){function e(){if(s>=a)return u;if(o)return o=!1,i;var n=s;if(34===r.charCodeAt(n)){for(var e=n;e++<a;)if(34===r.charCodeAt(e)){if(34!==r.charCodeAt(e+1))break;++e}s=e+2;var t=r.charCodeAt(e+1);return 13===t?(o=!0,10===r.charCodeAt(e+2)&&++s):10===t&&(o=!0),r.slice(n+1,e).replace(/""/g,'"')}for(;a>s;){var t=r.charCodeAt(s++),f=1;if(10===t)o=!0;else if(13===t)o=!0,10===r.charCodeAt(s)&&(++s,++f);else if(t!==c)continue;return r.slice(n,s-f)}return r.slice(n)}for(var t,o,i={},u={},f=[],a=r.length,s=0,p=0;(t=e())!==u;){for(var d=[];t!==i&&t!==u;)d.push(t),t=e();n&&null==(d=n(d,p++))||f.push(d)}return f}function t(n){if(Array.isArray(n[0]))return o(n);var e=Object.create(null),t=[];return n.forEach(function(r){for(var n in r)(n+="")in e||t.push(e[n]=n)}),[t.map(u).join(r)].concat(n.map(function(n){return t.map(function(r){return u(n[r])}).join(r)})).join("\n")}function o(r){return r.map(i).join("\n")}function i(n){return n.map(u).join(r)}function u(r){return f.test(r)?'"'+r.replace(/\"/g,'""')+'"':r}var f=new RegExp('["'+r+"\n]"),c=r.charCodeAt(0);return{parse:n,parseRows:e,format:t,formatRows:o}};r.csv=n(","),r.tsv=n("	"),r.dsv=n});